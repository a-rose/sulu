<dom-module id="element-core-data-view">
	<template>
		<span class="element-core-data-view-path">
			<template is="dom-repeat" items="{{path}}">
			   <span>{{item}}</span><span>/</span>
			</template>
		</span>


		<div class="clusterize">
			<div class="horizontal layout">
				<div class="flex-1">
				</div>
				<div class="flex-7">
					name
				</div>
				<div class="flex-1">
					ext
				</div>
				<div class="flex-1">
					size
				</div>
				<div class="flex-1">
					attr
				</div>
			</div>
			<div id="{{scrollAreaID}}" class="clusterize-scroll">
				<div id="{{contentAreaID}}" class="clusterize-content">
					<div class="clusterize-no-data">
						<i>{{loadingMessage}}</i>
					</div>
				</div>
			</div>
		</div>
	</template>

	<script>
		var FileSystemView = require("./file-system-view.js");
		var $ = require("jquery");
		window.Polymer({
			is: "element-core-data-view",
				ready: function() {
					var self = this;
					this.loadingMessage = "Loading data...";
					var id = this.getAttribute("view-id");
					this.scrollAreaID = "scrollArea" + id;
					this.contentAreaID = "contentArea" + id;

					var fileSystemView = new FileSystemView(id);
					self.sep = require("path").sep;
					self.path = fileSystemView.path.split(this.sep);
					fileSystemView.el = this;
					$(function() {
						fileSystemView.bind();

						$( self ).
							data("controller", fileSystemView).
							on( "click", ".filesystemitem", {}, fileSystemView.click).
							on( "dblclick", ".filesystemitem", {}, fileSystemView.dblclick);
						window.resizeScrollViews();
					});
				}
			}
		);
	</script>
</dom-module>